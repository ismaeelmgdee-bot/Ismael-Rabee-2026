import streamlit as st
import urllib.parse  # Ù„Ø¥ØµÙ„Ø§Ø­ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©

# 1. Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØµÙØ­Ø©
st.set_page_config(page_title="Ø±Ø¨ÙŠØ¹ Ø§Ù„Ù‚Ù„ÙˆØ¨ 2026", page_icon="ğŸ“–", layout="centered")

# 2. ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø°Ø§ÙƒØ±Ø©
if 'current_index' not in st.session_state:
    st.session_state.current_index = 0

# 3. ØªØµÙ…ÙŠÙ… CSS Ø§Ø­ØªØ±Ø§ÙÙŠ Ø«Ø§Ø¨Øª
st.markdown("""
    <style>
    .stApp { background-color: #0d1117; color: #ffffff; direction: rtl; }
    h1 { color: #d4af37 !important; text-align: center; font-family: 'Amiri', serif; }
    .stButton button { background-color: #d4af37; color: #000; border-radius: 12px; font-weight: bold; width: 100%; border: none; }
    .stAudio { width: 100%; border-radius: 20px; }
    /* Ù…Ù†Ø¹ Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø±Ù…Ø§Ø¯ÙŠ Ø¹Ù†Ø¯ ØªÙ…Ø±ÙŠØ± Ø§Ù„Ù…Ø§ÙˆØ³ */
    audio { background-color: #d4af37; border-radius: 50px; width: 100%; }
    audio::-webkit-media-controls-panel { background-color: #d4af37 !important; }
    </style>
    """, unsafe_allow_html=True)

# 4. Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ÙÙ‚Ø·)
base_url = "https://archive.org/download/audio4_quraan/"

talaawat_data = [
    ("Ø§Ù„Ø¬ÙˆÙ‡Ø±Ø© 1 - Ø³ÙˆØ±Ø© Ø§Ù„ÙƒÙ‡Ù ÙˆÙ‚ØµØ§Ø± Ø§Ù„Ø³ÙˆØ±", "Ø³ÙˆØ±Ø© Ø§Ù„ÙƒÙ‡Ù ÙˆÙ‚ØµØ§Ø± Ø§Ù„Ø³ÙˆØ± Ø¨Ø§Ù„Ù‚Ø±Ø§Ø¡Ø§Øª .. ØªÙ„Ø§ÙˆØ© Ø¥Ø¹Ø¬Ø§Ø²ÙŠØ© Ù„Ù„Ø´ÙŠØ® Ø¹Ø¨Ø¯ Ø§Ù„Ø¨Ø§Ø³Ø· - Ø¯Ù…Ø´Ù‚ 1957Ù….mp3"),
    ("Ø§Ù„Ø¬ÙˆÙ‡Ø±Ø© 2 - Ø³ÙˆØ±Ø© ÙŠÙˆØ³Ù (Ø­Ù„Ø¨ 1956)", "Ø³ÙˆØ±Ø© ÙŠÙˆØ³Ù Ø¨Ø§Ù„Ù‚Ø±Ø§Ø¡Ø§Øª .. ØªÙ„Ø§ÙˆØ© Ø¥Ø¹Ø¬Ø§Ø²ÙŠØ© Ù„Ù„Ø´ÙŠØ® Ø¹Ø¨Ø¯ Ø§Ù„Ø¨Ø§Ø³Ø· - Ø§Ù„Ù‚ØµØ± Ø§Ù„Ø¬Ø§Ø¨Ø±ÙŠ Ø¨Ø­Ù„Ø¨ 1956Ù….mp3"),
    ("Ø§Ù„Ø¬ÙˆÙ‡Ø±Ø© 3 - ØªÙ„Ø§ÙˆØ© Ù†Ø§Ø¯Ø±Ø© (Ø§Ù„Ø­Ø¬)", "ØªÙ„Ø§ÙˆØ© Ù†Ø§Ø¯Ø±Ø© ØªØ¹Ø±Ø¶ Ù„Ø£ÙˆÙ„ Ù…Ø±Ø© Ù…Ù† Ø£Ø±ÙˆØ¹ Ù…Ø§ ØªØ³Ù…Ø¹ Ù„Ù„Ø´ÙŠØ® Ø¹Ø¨Ø¯Ø§Ù„Ø¨Ø§Ø³Ø· Ø¹Ø¨Ø¯Ø§Ù„ØµÙ…Ø¯ _ Ø³ÙˆØ±Ø© Ø§Ù„Ø­Ø¬ - Surah A(MP3_1.mp3"),
    ("Ø§Ù„Ø¬ÙˆÙ‡Ø±Ø© 4 - Ø§Ù„ÙˆØ§Ù‚Ø¹Ø© ÙˆØ§Ù„Ø·Ø§Ø±Ù‚ (1956)", "ØªÙ„Ø§ÙˆØ© Ù†Ø§Ø¯Ø±Ø© Ø¬Ø¯Ø§Ù‹ Ù„Ù„Ø´ÙŠØ® Ø¹Ø¨Ø¯ Ø§Ù„Ø¨Ø§Ø³Ø· Ø¨Ø£Ø¯Ø§Ø¡ Ù„Ø§ ÙŠÙˆØµÙ ÙÙŠ Ø³ÙˆØ±ØªÙŠ Ø§Ù„ÙˆØ§Ù‚Ø¹Ø© ÙˆØ§Ù„Ø·Ø§Ø±Ù‚ 1956Ù….mp3"),
    ("Ø§Ù„Ø¬ÙˆÙ‡Ø±Ø© 5 - Ù‚ØµØ© Ù…ÙˆØ³Ù‰ (Ø§Ù„Ù‚ØµØµ)", "Ø¨Ø§Ù„ØªÙ„Ø§ÙˆØ§Øª Ù‚ØµÙ‡ Ù…ÙˆØ³Ù‰ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù… Ù…Ù† Ø³ÙˆØ±Ù‡ Ø§Ù„Ù‚ØµØµ Ù„Ù„Ø´ÙŠØ® Ø¹Ø¨Ø¯Ø§Ù„Ø¨Ø§Ø³Ø· Ø¹Ø¨Ø¯Ø§Ù„ØµÙ…Ø¯.mp3"),
    ("Ø§Ù„Ø¬ÙˆÙ‡Ø±Ø© 6 - ÙˆØ¬Ø§Ø¡ÙˆØ§ Ø£Ø¨Ø§Ù‡Ù… Ø¹Ø´Ø§Ø¡ (ÙŠÙˆØ³Ù)", "ÙˆØ¬Ø§Ø¡ÙˆØ§ Ø£Ø¨Ø§Ù‡Ù… Ø¹Ø´Ø§Ø¡ ÙŠØ¨ÙƒÙˆÙ†.. Ø³ÙˆØ±Ø© ÙŠÙˆØ³Ù.. Ø§Ù„Ù„Ø§Ø²Ù‚ÙŠØ©.. Ø§Ø®Ø±Ù‰.. 1962.mp3"),
    ("Ø§Ù„Ø¬ÙˆÙ‡Ø±Ø© 7 - Ø§Ù„ØªÙ„Ø§ÙˆØ© Ø§Ù„Ø£Ø±ÙˆØ¹ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚", "Ù„Ù† ÙŠØ£ØªÙŠ Ø§Ù„Ø²Ù…Ø§Ù† Ø¨Ù…Ø«Ù„Ùƒ Ø§Ù„Ø§ Ø§Ù† ÙŠØ´Ø§Ø¡ Ø§Ù„Ù„Ù‡ Ù‡Ø°Ù‡ Ø§Ù„ØªÙ„Ø§ÙˆØ© Ù‡Ù‰ Ø§Ù„Ø§Ø±ÙˆØ¹ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø·Ù„Ø§Ù‚ Ù„Ù„Ø´ÙŠØ® Ø¹Ø¨Ø¯ Ø§Ù„Ø¨Ø§Ø³Ø·.mp3"),
    ("Ø§Ù„Ø¬ÙˆÙ‡Ø±Ø© 8 - ØªÙ„Ø§ÙˆØ© ÙÙˆÙ‚ Ø§Ù„Ø³Ø­Ø§Ø¨ (1)", "ØªØµÙˆÙŠØ± Ù…Ù† ÙÙˆÙ‚ Ø§Ù„Ø³Ø­Ø§Ø¨ Ù„Ø£Ø±ÙˆØ¹ ØªÙ„Ø§ÙˆØ© ØªÙ‡Ø¯Ø¦ Ø§Ù„Ø£Ø¹ØµØ§Ø¨ ÙˆØ§Ù„Ù†ÙÙˆØ³ ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù… | Ø§Ù„Ø´ÙŠØ® Ø¹Ø¨Ø¯ Ø§Ù„Ø¨Ø§Ø³Ø· Ø¹Ø¨Ø¯ Ø§Ù„ØµÙ…Ø¯ | HD.mp3"),
    ("Ø§Ù„Ø¬ÙˆÙ‡Ø±Ø© 9 - ØªÙ„Ø§ÙˆØ© ÙÙˆÙ‚ Ø§Ù„Ø³Ø­Ø§Ø¨ (2)", "Ø£Ø±ÙˆØ¹ ØªÙ„Ø§ÙˆØ© ØªØ±ÙŠØ­ Ø§Ù„Ù‚Ù„ÙˆØ¨ ÙˆØ§Ù„Ù†ÙÙˆØ³ ØªØµÙˆÙŠØ± Ù…Ù† ÙÙˆÙ‚ Ø§Ù„Ø³Ø­Ø§Ø¨ Ù„Ø¹Ø¨Ø¯ Ø§Ù„Ø¨Ø§Ø³Ø· Ù…Ø¹ ØªØ±Ø¬Ù…Ø© Ø§Ù„Ù…Ø¹Ø§Ù†ÙŠ Ù„(MP3_1.mp3"),
    ("Ø§Ù„Ø¬ÙˆÙ‡Ø±Ø© 10 - Ù…Ù‚Ø·Ø¹ Ù†Ø§Ø¯Ø± Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ©", "ÙŠØ§ Ø§Ù„Ù„Ù‡ Ø¹Ù„Ù‰ Ø¬Ù…Ø§Ù„ ÙˆØ±ÙˆØ¹Ø© Ù‡Ø°Ø§ Ø§Ù„Ù…Ù‚Ø·Ø¹ Ù…Ù† ÙˆØ§Ø¦Ø¹ Ø§Ù„Ø´ÙŠØ® Ø¹Ø¨Ø¯ Ø§Ù„Ø¨Ø§Ø³Ø· Ø¹Ø¨Ø¯ Ø§Ù„ØµÙ…Ø¯ !! Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ© á´´á´°.mp3"),
    ("Ø§Ù„Ø¬ÙˆÙ‡Ø±Ø© 11 - Ø³ÙˆØ±Ø© Ø§Ù„Ø¥Ø®Ù„Ø§Øµ", "Al-Ikhlas.mp3"),
    ("Ø§Ù„Ø¬ÙˆÙ‡Ø±Ø© 12 - ØªÙ„Ø§ÙˆØ© Ù…Ø¨Ø§Ø±ÙƒØ© 10", "audio10_.mp3"),
    ("Ø§Ù„Ø¬ÙˆÙ‡Ø±Ø© 13 - ØªÙ„Ø§ÙˆØ© Ù…Ø¨Ø§Ø±ÙƒØ© 11", "audio11_.mp3"),
    ("Ø§Ù„Ø¬ÙˆÙ‡Ø±Ø© 14 - ØªÙ„Ø§ÙˆØ© Ù…Ø¨Ø§Ø±ÙƒØ© 13", "audio13_.mp3"),
    ("Ø§Ù„Ø¬ÙˆÙ‡Ø±Ø© 15 - ØªÙ„Ø§ÙˆØ© Ù…Ø¨Ø§Ø±ÙƒØ© 15", "audio15_.mp3"),
    ("Ø§Ù„Ø¬ÙˆÙ‡Ø±Ø© 16 - ØªÙ„Ø§ÙˆØ© Ù…Ø¨Ø§Ø±ÙƒØ© 17", "audio17_.mp3"),
    ("Ø§Ù„Ø¬ÙˆÙ‡Ø±Ø© 17 - ØªÙ„Ø§ÙˆØ© Ù…Ø¨Ø§Ø±ÙƒØ© 3", "audio3_.mp3"),
    ("Ø§Ù„Ø¬ÙˆÙ‡Ø±Ø© 18 - ØªÙ„Ø§ÙˆØ© Ù…Ø¨Ø§Ø±ÙƒØ© 6", "audio6_.mp3"),
    ("Ø§Ù„Ø¬ÙˆÙ‡Ø±Ø© 19 - ØªÙ„Ø§ÙˆØ© Ù…Ø¨Ø§Ø±ÙƒØ© 9", "audio9_.mp3"),
    ("Ø§Ù„Ø¬ÙˆÙ‡Ø±Ø© 20 - ØªÙ„Ø§ÙˆØ© Ø®ØªØ§Ù…ÙŠØ©", "audio4_.mp3")
]

# Ø¯Ø§Ù„Ø© Ø°ÙƒÙŠØ© Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· (URL Encoding)
def get_safe_url(file_name):
    encoded_name = urllib.parse.quote(file_name)
    return base_url + encoded_name

# 5. ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªØ­ÙƒÙ…
st.title("ğŸŒ™ Ù…ÙƒØªØ¨Ø© Ø±Ø¨ÙŠØ¹ Ø§Ù„Ù‚Ù„ÙˆØ¨ Ø§Ù„ØµÙˆØªÙŠØ©")

col1, col3 = st.columns([1, 1])
with col1:
    if st.button("â®ï¸ Ø§Ù„Ø³Ø§Ø¨Ù‚"):
        if st.session_state.current_index > 0: st.session_state.current_index -= 1
with col3:
    if st.button("Ø§Ù„ØªØ§Ù„ÙŠ â­ï¸"):
        if st.session_state.current_index < len(talaawat_data) - 1: st.session_state.current_index += 1

# Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ
current_item = talaawat_data[st.session_state.current_index]
current_name = current_item[0]
current_url = get_safe_url(current_item[1])

st.selectbox("Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙƒÙ†ÙˆØ²:", [x[0] for x in talaawat_data],
             index=st.session_state.current_index, key="sb")

st.markdown("---")
st.markdown("<h1 style='font-size: 80px;'>ğŸ“–</h1>", unsafe_allow_html=True)
st.subheader(f"Ø£Ù†Øª ØªØ³ØªÙ…Ø¹ Ø¥Ù„Ù‰: {current_name}")

# 6. ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
try:
    st.audio(current_url, format="audio/mp3", autoplay=True)
    st.success("âœ… ØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³Ø­Ø§Ø¨Ø© Ø¨Ù†Ø¬Ø§Ø­")
except:
    st.error("âš ï¸ Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø§Ù„Ù…Ù„Ù Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ.. Ø¬Ø±Ø¨ ØªÙ„Ø§ÙˆØ© Ø£Ø®Ø±Ù‰")

st.caption("Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© Ù…Ø¬Ø¯ÙŠ Ø¥Ø³Ù…Ø§Ø¹ÙŠÙ„ 2026")
